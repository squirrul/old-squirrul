webpackJsonp([0],{R2pP:function(t,n,o){(function(t,n){!function(){function o(t){function n(t){return t.split("/").slice(-1).toString().replace(".js","")}return t.slice?o[n(t)]:function(e,i){t(e={exports:{}}),o[n(i)]=e.exports}}var i;"undefined"!=typeof window&&(i=window),void 0!==t&&(i=t),i=i||{};var r=i.console||{log:function(){}},u=n;o(function(t){var n={};n.fns=n.fn={is:function(t){return!!t&&"function"==typeof t}},n.bi={is:function(t){return t instanceof Boolean||"boolean"==typeof t}},n.num={is:function(t){return!o(t)&&(t-parseFloat(t)+1>=0||1/0===t||-1/0===t)}},n.text={is:function(t){return"string"==typeof t}},n.text.ify=function(t){return n.text.is(t)?t:"undefined"!=typeof JSON?JSON.stringify(t):t&&t.toString?t.toString():t},n.text.random=function(t,n){var e="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t>0;)e+=n.charAt(Math.floor(Math.random()*n.length)),t--;return e},n.text.match=function(t,e){var o=!1;if(t=t||"",e=n.text.is(e)?{"=":e}:e||{},n.obj.has(e,"~")&&(t=t.toLowerCase(),e["="]=(e["="]||e["~"]).toLowerCase()),n.obj.has(e,"="))return t===e["="];if(n.obj.has(e,"*")){if(t.slice(0,e["*"].length)!==e["*"])return!1;o=!0,t=t.slice(e["*"].length)}if(n.obj.has(e,"!")){if(t.slice(-e["!"].length)!==e["!"])return!1;o=!0}if(n.obj.has(e,"+")&&n.list.map(n.list.is(e["+"])?e["+"]:[e["+"]],function(n){if(!(t.indexOf(n)>=0))return!0;o=!0}))return!1;if(n.obj.has(e,"-")&&n.list.map(n.list.is(e["-"])?e["-"]:[e["-"]],function(n){if(!(t.indexOf(n)<0))return!0;o=!0}))return!1;if(n.obj.has(e,">")){if(!(t>e[">"]))return!1;o=!0}if(n.obj.has(e,"<")){if(!(t<e["<"]))return!1;o=!0}if(n.obj.has(e,"?")){if(!function(t,n){for(var e,o=-1,i=0;e=n[i++];)if(!~(o=t.indexOf(e,o+1)))return!1;return!0}(t,e["?"]))return!1;o=!0}return o},n.list={is:function(t){return t instanceof Array}},n.list.slit=Array.prototype.slice,n.list.sort=function(t){return function(n,e){return n&&e?(n=n[t],e=e[t],n<e?-1:n>e?1:0):0}},n.list.map=function(t,n,e){return a(t,n,e)},n.list.index=1,n.obj={is:function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},n.obj.put=function(t,n,e){return(t||{})[n]=e,t},n.obj.has=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},n.obj.del=function(t,n){if(t)return t[n]=null,delete t[n],t},n.obj.as=function(t,n,e,o){return t[n]=t[n]||(o===e?{}:e)},n.obj.ify=function(t){if(r(t))return t;try{t=JSON.parse(t)}catch(n){t={}}return t},function(){function t(t,n){u(this,n)&&e!==this[n]||(this[n]=t)}var e;n.obj.to=function(n,e){return e=e||{},a(n,t,e),e}}(),n.obj.copy=function(t){return t?JSON.parse(JSON.stringify(t)):t},function(){function t(t,n){var e=this.n;if(!e||!(n===e||r(e)&&u(e,n)))return!!n||void 0}n.obj.empty=function(n,e){return!n||!a(n,t,{n:e})}}(),function(){function t(n,e){if(2===arguments.length)return t.r=t.r||{},void(t.r[n]=e);t.r=t.r||[],t.r.push(n)}var i=Object.keys;n.obj.map=function(a,s,f){var c,l,p,h,d,g=0,v=e(s);if(t.r=null,i&&r(a)&&(h=i(a),d=!0),o(a)||h)for(l=(h||a).length;g<l;g++){var b=g+n.list.index;if(v){if((p=d?s.call(f||this,a[h[g]],h[g],t):s.call(f||this,a[g],b,t))!==c)return p}else if(s===a[d?h[g]:g])return h?h[g]:b}else for(g in a)if(v){if(u(a,g)&&(p=f?s.call(f,a[g],g,t):s(a[g],g,t))!==c)return p}else if(s===a[g])return g;return v?t.r:n.list.index?0:-1}}(),n.time={},n.time.is=function(t){return t?t instanceof Date:+(new Date).getTime()};var e=n.fn.is,o=n.list.is,i=n.obj,r=i.is,u=i.has,a=i.map;t.exports=n})(o,"./type"),o(function(t){t.exports=function t(n,e,o){if(!n)return{to:t};var n=(this.tag||(this.tag={}))[n]||(this.tag[n]={tag:n,to:t._={next:function(){}}});if(e instanceof Function){var i={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:e,the:n,on:this,as:o};return(i.back=n.last||n).to=i,n.last=i}return(n=n.to).next(e),n}})(o,"./onto"),o(function(t){function n(t,n,o,i,r){if(t<n)return{defer:!0};if(n<o)return{historical:!0};if(o<n)return{converge:!0,incoming:!0};if(n===o){if(i=e(i)||"",r=e(r)||"",i===r)return{state:!0};if(i<r)return{converge:!0,current:!0};if(r<i)return{converge:!0,incoming:!0}}return{err:"Invalid CRDT Data: "+i+" to "+r+" at "+n+" to "+o+"!"}}if("undefined"==typeof JSON)throw new Error("JSON is not included in this browser. Please load it first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js");var e=JSON.stringify;t.exports=n})(o,"./HAM"),o(function(t){var n=o("./type"),e={};e.is=function(t){return t!==i&&(null===t||t!==1/0&&(!!(s(t)||u(t)||a(t))||(e.rel.is(t)||!1)))},e.rel={_:"#"},function(){function t(t,n){var e=this;return e.id?e.id=!1:n==r&&s(t)?void(e.id=t):e.id=!1}e.rel.is=function(n){if(n&&n[r]&&!n._&&c(n)){var e={};if(p(n,t,e),e.id)return e.id}return!1}}(),e.rel.ify=function(t){return l({},r,t)};var i,r=e.rel._,u=n.bi.is,a=n.num.is,s=n.text.is,f=n.obj,c=f.is,l=f.put,p=f.map;t.exports=e})(o,"./val"),o(function(t){var n=o("./type"),e=o("./val"),i={_:"_"};i.soul=function(t,n){return t&&t._&&t._[n||p]},i.soul.ify=function(t,n){return n="string"==typeof n?{soul:n}:n||{},t=t||{},t._=t._||{},t._[p]=n.soul||t._[p]||l(),t},i.soul._=e.rel._,function(){function t(t,n){if(n!==i._)return!e.is(t)||void(this.cb&&this.cb.call(this.as,t,n,this.n,this.s))}i.is=function(n,e,o){var r;return!!a(n)&&(!!(r=i.soul(n))&&!f(n,t,{as:o,cb:e,s:r,n:n}))}}(),function(){function t(t,n){var o,i=this.o;if(i.map)return o=i.map.call(this.as,t,""+n,i.node),void(void 0===o?s(i.node,n):i.node&&(i.node[n]=o));e.is(t)&&(i.node[n]=t)}i.ify=function(n,e,o){return e?"string"==typeof e?e={soul:e}:e instanceof Function&&(e={map:e}):e={},e.map&&(e.node=e.map.call(o,n,r,e.node||{})),(e.node=i.soul.ify(e.node||{},e))&&f(n,t,{o:e,as:o}),e.node}}();var r,u=n.obj,a=u.is,s=u.del,f=u.map,c=n.text,l=c.random,p=i.soul._;t.exports=i})(o,"./node"),o(function(t){function n(){var t;return t=f?c+f.now():r(),u<t?(a=0,u=t+n.drift):u=t+(a+=1)/s+n.drift}var e=o("./type"),i=o("./node"),r=e.time.is,u=-1/0,a=0,s=1e3,f="undefined"!=typeof performance&&(performance.timing&&performance),c=f&&f.timing&&f.timing.navigationStart||(f=!1);n._=">",n.drift=0,n.is=function(t,e,o){var i=e&&t&&t[w]&&t[w][n._]||o;if(i)return _(i=i[e])?i:-1/0},n.lex=function(){return n().toString(36).replace(".","")},n.ify=function(t,e,o,r,u){if(!t||!t[w]){if(!u)return;t=i.soul.ify(t,u)}var a=h(t[w],n._);return l!==e&&e!==w&&(_(o)&&(a[e]=o),l!==r&&(t[e]=r)),t},n.to=function(t,e,o){var r=t[e];return g(r)&&(r=b(r)),n.ify(o,e,n.is(t,e),r,i.soul(t))},function(){function t(t,e){w!==e&&n.ify(this.o,e,this.s)}n.map=function(e,o,i){var r,u=g(u=e||o)?u:null;return e=y(e=e||o)?e:null,u&&!e?(o=_(o)?o:n(),u[w]=u[w]||{},v(u,t,{o:u,s:o}),u):(i=i||g(o)?o:r,o=_(o)?o:n(),function(n,u,a,s){if(!e)return t.call({o:a,s:o},n,u),n;e.call(i||this||{},n,u,a,s),d(a,u)&&r===a[u]||t.call({o:a,s:o},n,u)})}}();var l,p=e.obj,h=p.as,d=p.has,g=p.is,v=p.map,b=p.copy,m=e.num,_=m.is,k=e.fn,y=k.is,w=i._;t.exports=n})(o,"./state"),o(function(t){var n=o("./type"),e=o("./val"),i=o("./node"),r={};!function(){function t(t,e){if(!t||e!==i.soul(t)||!i.is(t,this.fn,this.as))return!0;this.cb&&(n.n=t,n.as=this.as,this.cb.call(n.as,t,e,n))}function n(t){t&&i.is(n.n,t,n.as)}r.is=function(n,e,o,i){return!(!n||!s(n)||l(n))&&!h(n,t,{cb:e,fn:o,as:i})}}(),function(){function t(t,r){var u;return(u=l(t,r))?u:(r.env=t,r.soul=o,i.ify(r.obj,n,r)&&(t.graph[e.rel.is(r.rel)]=r.node),r)}function n(n,o,r){var s,l,p=this,h=p.env;if(i._===o&&c(n,e.rel._))return r._;if(s=a(n,o,r,p,h)){if(o||(p.node=p.node||r||{},c(n,i._)&&(p.node._=d(n._)),p.node=i.soul.ify(p.node,e.rel.is(p.rel)),p.rel=p.rel||e.rel.ify(i.soul(p.node))),(l=h.map)&&(l.call(h.as||{},n,o,r,p),c(r,o))){if(n=r[o],u===n)return void f(r,o);if(!(s=a(n,o,r,p,h)))return}if(!o)return p.node;if(!0===s)return n;if(l=t(h,{obj:n,path:p.path.concat(o)}),l.node)return l.rel}}function o(t){var n=this,o=e.rel.is(n.rel),r=n.env.graph;n.rel=n.rel||e.rel.ify(t),n.rel[e.rel._]=t,n.node&&n.node[i._]&&(n.node[i._][e.rel._]=t),c(r,o)&&(r[t]=r[o],f(r,o))}function a(t,n,o,i,r){var u;return!!e.is(t)||(s(t)?1:(u=r.invalid)?(t=u.call(r.as||{},t,n,o),a(t,n,o,i,r)):void(r.err="Invalid value at '"+i.path.concat(n).join(".")+"'!"))}function l(t,n){for(var e,o=t.seen,i=o.length;i--;)if(e=o[i],n.obj===e.obj)return e;o.push(n)}r.ify=function(n,o,i){var r={path:[],obj:n};return o?"string"==typeof o?o={soul:o}:o instanceof Function&&(o.map=o):o={},o.soul&&(r.rel=e.rel.ify(o.soul)),o.graph=o.graph||{},o.seen=o.seen||[],o.as=o.as||i,t(o,r),o.root=r.node,o.graph}}(),r.node=function(t){var n=i.soul(t);if(n)return p({},n,t)},function(){function t(t,n){var o,u;if(i._===n){if(l(t,e.rel._))return;return void(this.obj[n]=d(t))}return(o=e.rel.is(t))?(u=this.opt.seen[o])?void(this.obj[n]=u):void(this.obj[n]=this.opt.seen[o]=r.to(this.graph,o,this.opt)):void(this.obj[n]=t)}r.to=function(n,e,o){if(n){var i={};return o=o||{seen:{}},h(n[e],t,{obj:i,graph:n,opt:o}),i}}}();var u,a=n.obj,s=a.is,f=a.del,c=a.has,l=a.empty,p=a.put,h=a.map,d=a.copy;t.exports=r})(o,"./graph"),o(function(t){o("./onto"),t.exports=function(t,n){if(this.on){if(!(t instanceof Function)){if(!t||!n)return;var e=t["#"]||t,o=(this.tag||empty)[e];if(!o)return;return o=this.on(e,n),clearTimeout(o.err),!0}var e=n&&n["#"]||Math.random().toString(36).slice(2);if(!t)return e;var i=this.on(e,t,n);return i.err=i.err||setTimeout(function(){i.next({err:"Error: No ACK received yet."}),i.off()},(this.opt||{}).lack||9e3),e}}})(o,"./ask"),o(function(t){function n(t){var n={s:{}};return t=t||{max:1e3,age:9e3},n.check=function(t){return!!n.s[t]&&n.track(t)},n.track=function(o){return n.s[o]=i(),n.to||(n.to=setTimeout(function(){e.obj.map(n.s,function(o,r){t.age>i()-o||e.obj.del(n.s,r)}),n.to=null},t.age)),o},n}var e=o("./type"),i=e.time.is;t.exports=n})(o,"./dup"),o(function(t){function n(t){return t instanceof n?(this._={gun:this}).gun:this instanceof n?n.create(this._={gun:this,opt:t}):new n(t)}n.is=function(t){return t instanceof n},n.version=.9,n.chain=n.prototype,n.chain.toJSON=function(){};var e=o("./type");e.obj.to(e,n),n.HAM=o("./HAM"),n.val=o("./val"),n.node=o("./node"),n.state=o("./state"),n.graph=o("./graph"),n.on=o("./onto"),n.ask=o("./ask"),n.dup=o("./dup"),n._={node:n.node._,soul:n.val.rel._,state:n.state._,field:".",value:"="},function(){function t(t){var e,o=this,i=o.as,r=i.gun;(e=t["#"])||(e=t["#"]=c(9)),i.dup.check(e)||(i.dup.track(e),t=d(t),i.ask(t["@"],t)||(t.get&&n.on.get(t,r),t.put&&n.on.put(t,r)),i.on("out",t))}n.create=function(e){e.root=e.root||e.gun,e.graph=e.graph||{},e.on=e.on||n.on,e.ask=e.ask||n.ask,e.dup=e.dup||n.dup();var o=e.gun.opt(e.opt);return e.once||(e.on("in",t,e),e.on("out",t,e)),e.once=1,o}}(),function(){function t(t,e,o,i){var r=this,u=n.state.is(o,e);if(!u)return r.err="Error: No state on '"+e+"' in node '"+i+"'!";var a=r.graph[i]||_,s=n.state.is(a,e,!0),f=a[e],c=n.HAM(r.machine,u,s,t,f);if(!c.incoming)return void(c.defer&&(r.defer=u<(r.defer||1/0)?u:r.defer));r.put[i]=n.state.to(o,e,r.put[i]),(r.diff||(r.diff={}))[i]=n.state.to(o,e,r.diff[i])}function e(t,n){var e=this.gun._,i=(e.next||_)[n];if(i){var r=this.map[n]={put:this.node=t,get:this.soul=n,gun:this.at=i};this.ack&&(r["@"]=this.ack),g(t,o,this)}}function o(t,e){var o=this.graph,i=this.soul,r=this.at._;o[i]=n.state.to(this.node,e,o[i]),r.put=n.state.to(this.node,e,r.put)}function r(t){var n;if(t.gun)return(n=this.gun._).tag.node?void n.on("node",function(t){this.off(),t.gun._.on("in",t)}).on.on("node",t):void t.gun._.on("in",t)}n.on.put=function(o,u){var a=u._,s={gun:u,graph:a.graph,put:{},map:{},machine:n.state(),ack:o["@"]};if(n.graph.is(o.put,null,t,s)||(s.err="Error: Invalid graph!"),s.err)return a.on("in",{"@":o["#"],err:n.log(s.err)});g(s.put,e,s),g(s.map,r,s),i!==s.defer&&setTimeout(function(){n.on.put(o,u)},s.defer-a.machine),s.diff&&a.on("put",d(o,{put:s.diff}))},n.on.get=function(t,e){var o=e._,i=t.get[b],r=o.graph[i],u=t.get[m],a=o.next||(o.next={}),s=(a[i]||_)._;if(!r||!s)return o.on("get",t);if(u){if(!h(r,u))return o.on("get",t);r=n.state.to(r,u)}else r=n.obj.copy(r);r=n.graph.node(r),o.on("in",{"@":t["#"],put:r,gun:e}),o.on("get",t)}}(),function(){n.chain.opt=function(t){t=t||{};var e=this,o=e._,i=t.peers||t;return p(t)||(t={}),p(o.opt)||(o.opt=t),f(i)&&(i=[i]),a(i)&&(i=g(i,function(t,n,e){e(t,{url:t})}),p(o.opt.peers)||(o.opt.peers={}),o.opt.peers=d(i,o.opt.peers)),o.opt.peers=o.opt.peers||{},d(t,o.opt),n.on("opt",o),o.opt.uuid=o.opt.uuid||function(){return v()+c(12)},e}}();var i,a=n.list.is,s=n.text,f=s.is,c=s.random,l=n.obj,p=l.is,h=l.has,d=l.to,g=l.map,v=n.state.lex,b=n._.soul,m=n._.field,_={};r.debug=function(t,n){return r.debug.i&&t===r.debug.i&&r.debug.i++&&(r.log.apply(r,arguments)||n)},n.log=function(){return!n.log.off&&r.log.apply(r,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(t,e,o){return(o=n.log.once)[t]=o[t]||0,o[t]++||n.log(e)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, feel free to ask for help on https://gitter.im/amark/gun and ask StackOverflow questions tagged with 'gun'!"),"undefined"!=typeof window&&(window.Gun=n),void 0!==u&&(u.exports=n),t.exports=n})(o,"./root"),o(function(){var t=o("./root");t.chain.back=function(o,i){var r;if(-1===(o=o||1)||1/0===o)return this._.root;if(1===o)return this._.back||this;var u=this,a=u._;if("string"==typeof o&&(o=o.split(".")),!(o instanceof Array)){if(o instanceof Function){for(var s,r={back:u};(r=r.back)&&(r=r._)&&!(s=o(r,i)););return s}return t.num.is(o)?a.back.back(o-1):this}var f=0,c=o.length,r=a;for(f;f<c;f++)r=(r||e)[o[f]];return n!==r?i?u:r:(r=a.back)?r.back(o,i):void 0};var n,e={}})(o,"./back"),o(function(){function t(t){var n,e=this.as,o=e.back._,i=e.root._;if(t.gun||(t.gun=e.gun),this.to.next(t),n=t.get){if(n["#"]||e.soul){if(n["#"]=n["#"]||e.soul,t["#"]||(t["#"]=m()),o=i.gun.get(n["#"])._,n=n["."]){if(d(o.put,n))return void o.on("in",{gun:o.gun,put:c.state.to(o.put,n),get:o.get})}else{if(d(o,"put")&&o.on("in",o),o.ack)return;t.gun=o.gun,o.ack=-1}return i.ask(f,t),i.on("in",t)}if(i.now&&(i.now[e.id]=i.now[e.id]||!0),n["."])return e.get?(t={get:{".":e.get},gun:e.gun},(o.ask||(o.ask={}))[e.get]=t.gun,o.on("out",t)):(t={get:{},gun:e.gun},o.on("out",t));if(e.ack=e.ack||-1,e.get)return t.gun=e.gun,n["."]=e.get,(o.ask||(o.ask={}))[e.get]=t.gun,o.on("out",t)}return o.on("out",t)}function n(t){t=t._||t;var n,o=this,r=this.as,s=t.gun,f=s._,p=t.put;if(r.get&&t.get!==r.get&&(t=v(t,{get:r.get})),r.field&&f!==r&&(t=v(t,{gun:r.gun}),f.ack&&(r.ack=f.ack)),l===p){if(o.to.next(t),r.soul)return;return i(r,t,o),r.field&&a(r,t),g(f.echo,r.id),void g(r.map,f.id)}return r.soul?(o.to.next(t),i(r,t,o),void b(p,u,{at:t,cat:r})):(n=c.val.rel.is(p))?(e(r,t,f,n),o.to.next(t),void i(r,t,o)):c.val.is(p)?(r.field||r.soul?a(r,t):(f.field||f.soul)&&((f.echo||(f.echo={}))[r.id]=r,(r.map||(r.map={}))[f.id]=r.map[f.id]||{at:f}),o.to.next(t),void i(r,t,o)):(r.field&&f!==r&&d(f,"put")&&(r.put=f.put),(n=c.node.soul(p))&&f.field&&(f.put=r.root.get(n)._.put),o.to.next(t),i(r,t,o),e(r,t,f,n),void b(p,u,{at:t,cat:r}))}function e(t,n,o,i){if(i&&k!==t.get){var r=t.root.get(i)._;if(t.has?o=r:o.has&&e(o,n,o,i),o!==t){(o.echo||(o.echo={}))[t.id]=t,t.has&&!(t.map||p)[o.id]&&a(t,n),r=(t.map||(t.map={}))[o.id]=t.map[o.id]||{at:o};var u=t.root._.now;if(i===r.rel){if(!u)return;if(l===u[t.id])return;if((u._||(u._={}))[t.id])return;u._[t.id]=!0}s(t,r.rel=i)}}}function i(t,n,e){t.echo&&((t.has||t.field)&&(n=v(n,{event:e})),b(t.echo,r,n))}function r(t){t.on("in",this)}function u(t,n){var e,o,i,r=this.cat,u=r.next||p,a=this.at;(k!==n||u[n])&&(e=u[n])&&(i=e._,i.field?(t&&t[_]&&c.val.rel.is(t)===c.node.soul(i.put)||(i.put=t),o=e):o=a.gun.get(n),i.on("in",{put:t,get:n,gun:o,via:a}))}function a(t,n){if(t.has||t.soul){var e=t.map,o=t.root._;t.map=null,(o.now&&o.now[t.id]||l!==n.put||n["@"]||null!==e)&&(l===e&&c.val.rel.is(t.put)||(b(e,function(n){(n=n.at)&&g(n.echo,t.id)}),b(t.next,function(t,n){var e=t._;e.put=l,e.ack&&(e.ack=-1),e.on("in",{get:n,gun:t,put:l})})))}}function s(t,n){var e=t.root.get(n)._;t.ack&&(e.on("out",{get:{"#":n}}),!t.ask)||(b(t.ask||t.next,function(t,e){t._.on("out",{get:{"#":n,".":e}})}),c.obj.del(t,"ask"))}function f(t){var n=this.as,e=n.get||p,o=n.gun._;if(o.ack&&(o.ack=o.ack+1||1),!t.put||k==e["."]||e["."]&&!d(t.put[e["#"]],o.get)){if(o.put!==l)return;return void o.on("in",{get:o.get,put:o.put=l,gun:o.gun,"@":t["@"]})}t.gun=o.root,c.on.put(t,o.root)}var c=o("./root");c.chain.chain=function(){var e,o=this._,i=new this.constructor(this),r=i._;return r.root=e=o.root,r.id=++e._.once,r.back=this,r.on=c.on,r.on("in",n,r),r.on("out",t,r),i},c.chain.chain.input=n;var l,p={},h=c.obj,d=h.has,g=h.del,v=h.to,b=h.map,m=c.text.random,_=c._.soul,k=c.node._})(o,"./chain"),o(function(){function t(t,n){var e=n._,o=e.next,i=n.chain(),r=i._;return o||(o=e.next={}),o[r.get=t]=i,e.root===n?r.soul=t:(e.soul||e.field||e.has)&&(r.field=r.has=t,u(e.put,t)),i}function n(t){var n,e=this,o=e.as,r=t.gun,u=r._,s=u.root._,c=t.put;if((n=s.now)&&e!==n[o.now])return e.to.next(t);i===c&&(c=u.put),(n=c)&&n[f._]&&(n=f.is(n))&&(n=u.root.get(n)._,i!==n.put&&(t=a(t,{put:n.put}))),o.use(t,t.event||e),e.to.next(t)}var e=o("./root");e.chain.get=function(o,i,r){if("string"!=typeof o){if(o instanceof Function){var u,a=this,f=a._,l=f.root._,p=l.now;return r=i||{},r.use=o,r.out=r.out||{},r.out.get=r.out.get||{},u=f.on("in",n,r),(l.now={$:1})[r.now=f.id]=u,f.on("out",r.out),l.now=p,a}return s(o)?this.get(""+o,i,r):((r=this.chain())._.err={err:e.log("Invalid get request!",o)},i&&i.call(r,r._.err),r)}var a,p,h=this,d=h._,g=d.next||c;return(a=g[o])||(a=t(o,h)),(p=d.stun)&&(a._.stun=a._.stun||p),i&&i instanceof Function&&a.get(i,r),a};var i,r=e.obj,u=r.has,a=e.obj.to,s=e.num.is,f=e.val.rel,c={}})(o,"./get"),o(function(){function t(t){t.batch=i;var n=t.opt||{},e=t.env=l.state.map(a,n.state);if(e.soul=t.soul,t.graph=l.graph.ify(t.data,e,t),e.err)return(t.ack||m).call(t,t.out={err:l.log(e.err)}),void(t.res&&t.res());t.batch()}function n(t){return void(t&&t())}function i(){var t=this;t.graph&&!v(t.stun,u)&&(t.res=t.res||function(t){t&&t()},t.res(function(){var n=t.gun.back(-1)._,e=n.ask(function(n){this.off(),t.ack&&t.ack(n,this)},t.opt),o=n.root._.now;h.del(n.root._,"now"),t.ref._.now=!0,t.ref._.on("out",{gun:t.ref,put:t.out=t.env.graph,opt:t.opt,"#":e}),h.del(t.ref._,"now"),n.root._.now=o},t),t.res&&t.res())}function u(t){if(t)return!0}function a(t,n,e,o){var i=this;!n&&o.path.length&&(i.res||_)(function(){var t=o.path,n=i.ref,e=0,r=t.length;for(e;e<r;e++)n=n.get(t[e]);if(i.not||l.node.soul(o.obj)){var u=l.node.soul(o.obj)||(n.back("opt.uuid")||l.text.random)();return u?(n.back(-1).get(u),void o.soul(u)):((i.stun=i.stun||{})[t]=!0,void n.back("opt.uuid")(function(e,r){if(e)return l.log(e);n.back(-1).get(r),o.soul(r),i.stun[t]=!1,i.batch()}))}(i.stun=i.stun||{})[t]=!0,n.get("_").get(s,{as:{at:o,as:i}})},{as:i,at:o})}function s(t,n){var o=this.as,i=o.at;if(o=o.as,t.gun&&t.gun._.back){n.off(),t=t.gun._.back._;var r=r||l.node.soul(i.obj)||l.node.soul(t.put)||l.val.rel.is(t.put)||(o.gun.back("opt.uuid")||l.text.random)();if(!r)return void t.gun.back("opt.uuid")(function(n,r){if(n)return l.log(e);f(t,r,i,o)});f(t,r,i,o)}}function f(t,n,e,o){t.gun.back(-1).get(n),e.soul(n),o.stun[e.path]=!1,o.batch()}function c(t,n){var e=this.as;if(t.gun&&t.gun._){if(t.err)return void r.log("Please report this as an issue! Put.any.err");var o,i=t.gun._.back._,u=i.put,a=e.opt||{};if(!(o=e.ref)||!o._.now){if(n.off(),e.ref!==e.gun){if(!(o=e.gun._.get||i.get))return void r.log("Please report this as an issue! Put.no.get");e.data=g({},o,e.data),o=null}if(p===u){if(!i.get)return;i.soul||(o=i.gun.back(function(t){if(t.soul)return t.soul;e.data=g({},t.get,e.data)})),o=o||i.get,i=i.root.get(o)._,e.not=e.soul=o,u=e.data}if(!e.not&&!(e.soul=l.node.soul(u))&&!(e.soul=e.path&&d(e.data)?(a.uuid||i.root._.opt.uuid||l.text.random)():t.soul||i.soul||(a.uuid||i.root._.opt.uuid||l.text.random)()))return void ref.back("opt.uuid")(function(t,n){if(t)return l.log(t);e.ref.put(e.data,e.soul=n,e)});e.ref.put(e.data,e.soul,e)}}}var l=o("./root");l.chain.put=function(e,o,i){var r,u=this,a=u._,s=a.root;return i=i||{},i.data=e,i.gun=i.gun||u,"string"==typeof o?i.soul=o:i.ack=o,a.soul&&(i.soul=a.soul),i.soul||s===u?d(i.data)?(i.soul=i.soul||(i.not=l.node.soul(i.data)||(s._.opt.uuid||l.text.random)()))?(i.gun=u=s.get(i.soul),i.ref=i.gun,t(i),u):(s._.opt.uuid(function(t,n){if(t)return l.log(t);(i.ref||i.gun).put(i.data,i.soul=n,i)}),u):((i.ack||m).call(i,i.out={err:l.log("Data saved to the root level of the graph must be a node (an object), not a",typeof i.data,'of "'+i.data+'"!')}),i.res&&i.res(),u):l.is(e)?(e.get("_").get(function(t,n,e){if(n.off(),!(e=t.gun)||!(e=e._.back)||!e._.soul)return l.log("The reference you are saving is a",typeof t.put,'"'+i.put+'", not a node (object)!');u.put(l.val.rel.ify(e._.soul),o,i)}),u):(i.ref=i.ref||s===(r=a.back)?u:r,i.ref._.soul&&l.val.is(i.data)&&a.get?(i.data=g({},a.get,i.data),i.ref.put(i.data,i.soul,i),u):(i.ref.get("_").get(c,{as:i}),i.out||(i.res=i.res||n,i.gun._.stun=i.ref._.stun),u))};var p,h=l.obj,d=h.is,g=h.put,v=h.map,b={},m=function(){},_=function(t,n){t.call(n||b)}})(o,"./put"),o(function(t){var n=o("./root");o("./chain"),o("./back"),o("./put"),o("./get"),t.exports=n})(o,"./index"),o(function(){function t(t,n){var o,r=this,u=t.gun,a=u._,f=a.put||t.put,o=r.last,c=a.id+t.get;if(i!==f){if(f&&f[s._]&&(o=s.is(f))){if(o=a.root.get(o)._,i===o.put)return;f=o.put}r.change&&(f=t.put),(o.put!==f||o.get!==c||e.node.soul(f))&&(o.put=f,o.get=c,a.last=f,r.as?r.ok.call(r.as,t,n):r.ok.call(u,f,t.get,t,n))}}function n(t,o,r){var u,a=this.as,f=a.cat,c=t.gun,l=c._,p=l.put||t.put;if(u=e.node.soul(p)||s.is(p)){if(u=f.root.get(u)._,i===u.put)return;p=u.put}if(o.wait&&clearTimeout(o.wait),!r)return void(o.wait=setTimeout(function(){n.call({as:a},t,o,o.wait||1)},a.wait||99));if(f.field||f.soul){if(o.off())return}else{if((a.seen=a.seen||{})[l.id])return;a.seen[l.id]=!0}a.ok.call(t.gun||a.gun,p,t.get)}var e=o("./index");e.chain.on=function(n,e,o,i){var r,u,a=this,s=a._;if("string"==typeof n)return e?(r=s.on(n,e,o||s,i),o&&o.gun&&(o.subs||(o.subs=[])).push(r),u=function(){r&&r.off&&r.off(),u.off()},u.off=a.off.bind(a)||f,a.off=u,a):s.on(n);var c=e;return c=!0===c?{change:!0}:c||{},c.ok=n,c.last={},a.get(t,c),a},e.chain.val=function(t,o){var r=this,u=r._,a=u.put;if(0<u.ack&&i!==a)return(t||f).call(r,a,u.get),r;if(!t){e.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it.");var s=r.chain();return s._.val=r.val(function(){s._.on("in",r._)}),s}return(o=o||{}).ok=t,o.cat=u,o.out={"#":e.text.random(9)},r.get(n,{as:o}),o.async=!0,r},e.chain.off=function(){var t,n=this,e=n._,o=e.back||{},i=o._;if(i)return(t=i.next)&&t[e.get]&&a(t,e.get),(t=i.ask)&&a(t,e.get),(t=i.put)&&a(t,e.get),(t=e.soul)&&a(i.root._.graph,t),(t=e.map)&&u(t,function(t){t.rel&&i.root.get(t.rel).off()}),(t=e.next)&&u(t,function(t){t.off()}),e.on("off",{}),n};var i,r=e.obj,u=r.map,a=r.del,s=e.val.rel,f=function(){}})(o,"./on"),o(function(){function t(t){t.put&&!e.val.is(t.put)&&(this.as.val&&this.off(),r(t.put,n,{at:this.as,msg:t}),this.to.next(t))}function n(t,n){if(a!==n){var e=this.msg,o=e.gun,i=this.at,r=o.get(n)._;(r.echo||(r.echo={}))[i.id]=i}}var e=o("./index");e.chain.map=function(n){var o,r=this,a=r._;return n?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),o=r.chain(),r.map().on(function(t,r,a,s){var f=(n||u).call(this,t,r,a,s);if(i!==f)return e.is(f)?void o._.on("in",f._):void o._.on("in",{get:r,put:f,gun:o})}),o):(o=a.fields)?o:(o=a.fields=r.chain(),o._.val=r.back("val"),o._.MAPOF=a.soul,r.on("in",t,o._),o)};var i,r=e.obj.map,u=function(){},a=e.node._})(o,"./map"),o(function(){var t=o("./index");t.chain.set=function(n,e,o){var i,r=this;if(e=e||function(){},o=o||{},o.item=o.item||n,i=t.node.soul(n))return r.set(r.back(-1).get(i),e,o);if(!t.is(n)){var u=r._.root._.opt.uuid()||t.state.lex()+t.text.random(12);return t.obj.is(n)?r.set(r._.root.put(n,u),e,o):r.get(u).put(n)}return n.get("_").get(function(n,i){if(n.gun&&n.gun._.back){i.off(),n=n.gun._.back._;var u={},a=n.put,s=t.node.soul(a);if(!s)return e.call(r,{err:t.log('Only a node can be linked! Not "'+a+'"!')});r.put(t.obj.put(u,s,t.val.rel.ify(s)),e,o)}},{wait:0}),n}})(o,"./set"),o(function(){if("undefined"!=typeof Gun){var t,n=function(){};"undefined"!=typeof window&&(t=window);var e=t.localStorage||{setItem:n,removeItem:n,getItem:n};Gun.on("opt",function(t){this.to.next(t);var n=t.opt;if(!t.once&&!1!==n.localStorage){n.file=n.file||n.prefix||"gun/";var o,i={},r=0,u=Gun.obj.ify(e.getItem(n.file))||{};t.on("put",function(t){if(this.to.next(t),Gun.graph.is(t.put,null,a),t["@"]||(i[t["#"]]=!0),(r+=1)>=(n.batch||1e3))return s();o||(o=setTimeout(s,n.wait||1))}),t.on("get",function(e){this.to.next(e);var o,i,r=e.get;if(r&&(o=r[Gun._.soul])){var a=r["."];i=u[o]||void 0,i&&a&&(i=Gun.state.to(i,a)),(i||Gun.obj.empty(n.peers))&&t.on("in",{"@":e["#"],put:Gun.graph.node(i),how:"lS"})}});var a=function(t,n,e,o){u[o]=Gun.state.to(e,n,u[o])},s=function(){var a;r=0,clearTimeout(o),o=!1;var s=i;i={};try{e.setItem(n.file,JSON.stringify(u))}catch(t){Gun.log(a=t||"localStorage failure")}(a||Gun.obj.empty(n.peers))&&Gun.obj.map(s,function(n,e){t.on("in",{"@":e,err:a,ok:0})})}}})}})(o,"./adapters/localStorage"),o(function(){var t,n=o("./index");"undefined"!=typeof WebSocket?t=WebSocket:("undefined"!=typeof webkitWebSocket&&(t=webkitWebSocket),"undefined"!=typeof mozWebSocket&&(t=mozWebSocket)),n.on("opt",function(o){function i(t){var n=this,e=c,o=t.wire||u(t,n);if(o)return o.readyState===o.OPEN?void o.send(e):void(t.queue=t.queue||[]).push(e)}function r(t,n,o){if(o&&t){try{t=JSON.parse(t.data||t)}catch(t){}if(t instanceof Array)for(var i,u=0;i=t[u++];)r(i,n,o);else 1==f.who&&(t.ws=e),o.on("in",t)}}function u(e,u){if(e&&e.url){var s=e.url.replace("http","ws"),f=e.wire=new t(s);return f.onclose=function(){o.on("bye",e),a(e,u)},f.onerror=function(){a(e,u)},f.onopen=function(){o.on("hi",e);var t=e.queue;e.queue=[],n.obj.map(t,function(t){c=t,i.call(u,e)})},f.onmessage=function(t){r(t,e,u)},f}}function a(t,n){clearTimeout(t.defer),t.defer=setTimeout(function(){u(t,n)},2e3)}this.to.next(o);var s=o.opt;if(!o.once&&t&&!1!==s.WebSocket){var f=s.ws||(s.ws={});if(f.who=0,n.obj.map(s.peers,function(){++f.who}),!o.once){var c;o.on("out",function(t){if(this.to.next(t),!t.ws||1!=f.who){if(c=JSON.stringify(t),f.drain)return void f.drain.push(c);f.drain=[],setTimeout(function(){if(f.drain){var t=f.drain;f.drain=null,t.length&&(c=JSON.stringify(t),n.obj.map(s.peers,i,o))}},s.wait||1),n.obj.map(s.peers,i,o)}})}}});var e=function(){}})(o,"./adapters/websocket")}()}).call(n,o("h6ac"),o("l262")(t))},WScg:function(t,n,e){"use strict";function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"default",function(){return h});var r=e("KM04"),u=(e.n(r),e("R2pP")),a=e.n(u),s=e("dKk8"),f=e.n(s),c=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},l="https://gun-dearwafeum.now.sh/gun",p=function(t){return Object.keys(t).map(function(n){return c({key:n},t[n])}).filter(function(t){return Boolean(t.when)&&"_"!==t.key}).sort(function(t,n){return t.when-n.when}).map(function(t){return t.whenFmt=new Date(t.when).toLocaleString().toLowerCase(),t})},h=function(t){function n(n){var e=o(this,t.call(this,n));return e.state={newNote:"",name:(document.cookie.match(/alias\=(.*?)(\&|$|\;)/i)||[])[1]||"",notes:{}},e.handleChange=function(t){return function(n){var o;return e.setState((o={},o[t]=n.target.value,o))}},e.gun=a()(l).get(e.props.db).get("notes"),"undefined"!=typeof window&&(window.gun=e.gun),e.send=e.send.bind(e),e}return i(n,t),n.prototype.componentWillMount=function(){var t=this,n={};this.gun.map().val(function(e,o){n[o]=e,t.setState({notes:c({},t.state.notes,n)})})},n.prototype.send=function(t){t.preventDefault();var n=this.state.name||"user"+a.a.text.random(6);this.setState({name:n}),document.cookie="alias="+n;var e=a.a.time.is();this.gun.get(e+"_"+a.a.text.random(4)).put({who:n,when:e,what:this.state.newNote}),this.setState({newNote:""})},n.prototype.render=function(t){var n=t.db,e=p(this.state.notes);return Object(r.h)("div",{class:f.a.home},Object(r.h)("h1",null,"db: ",n),Object(r.h)("ul",null,e.map(function(t){return Object(r.h)("li",{key:t.key},Object(r.h)("b",null,t.who,":")," ",t.what,Object(r.h)("span",{className:"when"},t.whenFmt))})),Object(r.h)("form",{onSubmit:this.send},Object(r.h)("input",{placeholder:"username",value:this.state.name,className:"who",onChange:this.handleChange("name")}),Object(r.h)("textarea",{placeholder:"note",value:this.state.newNote,className:"what",onChange:this.handleChange("newNote")}),Object(r.h)("button",{onClick:this.send},"Send")))},n}(r.Component)},dKk8:function(t){t.exports={home:"home__3G66z"}},h6ac:function(t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},l262:function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}});
//# sourceMappingURL=route-chat.chunk.86663.js.map