{"version":3,"sources":["webpack:///route-home.chunk.9e1e9.js","webpack:///./routes/home/index.js","webpack:///./routes/home/style.css"],"names":["webpackJsonp","D238","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Home","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1_gun_gun__","n","__WEBPACK_IMPORTED_MODULE_1_gun_gun___default","__WEBPACK_IMPORTED_MODULE_2__style__","__WEBPACK_IMPORTED_MODULE_2__style___default","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","formatNotes","notes","keys","map","filter","m","Boolean","when","sort","a","b","whenFmt","Date","toLocaleString","toLowerCase","_ref","_Component","props","_this","this","state","newNote","name","document","cookie","match","handleChange","e","_this$setState","setState","gun","get","send","bind","componentWillMount","_this2","tmpState","val","note","preventDefault","who","text","random","time","is","put","what","render","class","home","className","onSubmit","onChange","onClick","ZAL5","exports"],"mappings":"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","file":"route-home.chunk.9e1e9.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"D238\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Home; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gun_gun__ = __webpack_require__(\"R2pP\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gun_gun___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_gun_gun__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__style__ = __webpack_require__(\"ZAL5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__style__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar formatNotes = function formatNotes(notes) {\n\treturn Object.keys(notes).map(function (key) {\n\t\treturn _extends({ key: key }, notes[key]);\n\t}).filter(function (m) {\n\t\treturn Boolean(m.when) && m.key !== '_';\n\t}).sort(function (a, b) {\n\t\treturn a.when - b.when;\n\t}).map(function (m) {\n\t\treturn m.whenFmt = new Date(m.when).toLocaleString().toLowerCase(), m;\n\t});\n};\n\nvar _ref = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h1',\n\tnull,\n\t'hello'\n);\n\nvar Home = function (_Component) {\n\t_inherits(Home, _Component);\n\n\tfunction Home(props) {\n\t\t_classCallCheck(this, Home);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_this.state = {\n\t\t\tnewNote: '',\n\t\t\tname: (document.cookie.match(/alias\\=(.*?)(\\&|$|\\;)/i) || [])[1] || '',\n\t\t\tnotes: {}\n\t\t};\n\n\t\t_this.handleChange = function (key) {\n\t\t\treturn function (e) {\n\t\t\t\tvar _this$setState;\n\n\t\t\t\treturn _this.setState((_this$setState = {}, _this$setState[key] = e.target.value, _this$setState));\n\t\t\t};\n\t\t};\n\n\t\t_this.gun = _this.props.gun.get('notes');\n\t\t_this.send = _this.send.bind(_this);\n\t\treturn _this;\n\t}\n\n\tHome.prototype.componentWillMount = function componentWillMount() {\n\t\tvar _this2 = this;\n\n\t\tvar tmpState = {};\n\n\t\tthis.gun.map().val(function (note, key) {\n\t\t\ttmpState[key] = note;\n\t\t\t_this2.setState({ notes: _extends({}, _this2.state.notes, tmpState) });\n\t\t});\n\t};\n\n\tHome.prototype.send = function send(e) {\n\t\te.preventDefault();\n\t\tvar who = this.state.name || 'user' + __WEBPACK_IMPORTED_MODULE_1_gun_gun___default.a.text.random(6);\n\t\tthis.setState({ name: who });\n\t\tdocument.cookie = 'alias=' + who;\n\t\tvar when = __WEBPACK_IMPORTED_MODULE_1_gun_gun___default.a.time.is();\n\t\tvar key = when + '_' + __WEBPACK_IMPORTED_MODULE_1_gun_gun___default.a.text.random(4);\n\t\tthis.gun.get(key).put({\n\t\t\twho: who,\n\t\t\twhen: when,\n\t\t\twhat: this.state.newNote\n\t\t});\n\t\tthis.setState({ newNote: '' });\n\t};\n\n\tHome.prototype.render = function render() {\n\t\tvar notes = formatNotes(this.state.notes);\n\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t'div',\n\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_2__style___default.a.home },\n\t\t\t_ref,\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'ul',\n\t\t\t\tnull,\n\t\t\t\tnotes.map(function (note) {\n\t\t\t\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'li',\n\t\t\t\t\t\t{ key: note.key },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'b',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tnote.who,\n\t\t\t\t\t\t\t':'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t' ',\n\t\t\t\t\t\tnote.what,\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t{ className: 'when' },\n\t\t\t\t\t\t\tnote.whenFmt\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t),\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'form',\n\t\t\t\t{ onSubmit: this.send },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { value: this.state.name, className: 'who', onChange: this.handleChange('name') }),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { value: this.state.newNote, className: 'what', onChange: this.handleChange('newNote') }),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ onClick: this.send },\n\t\t\t\t\t'Send'\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn Home;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ }),\n\n/***/ \"ZAL5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__MseGd\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-home.chunk.9e1e9.js","import Gun from 'gun/gun';\nimport { h, Component } from 'preact';\nimport style from './style';\n\nconst formatNotes = notes => Object.keys(notes)\n\t.map(key => ({ key, ...notes[key] }))\n\t.filter(m => Boolean(m.when) && m.key !== '_')\n\t.sort((a, b) => a.when - b.when)\n\t.map(m => ((m.whenFmt = new Date(m.when).toLocaleString().toLowerCase()), m));\n\nexport default class Home extends Component {\n\n\tstate = {\n\t\tnewNote: '',\n\t\tname: (document.cookie.match(/alias\\=(.*?)(\\&|$|\\;)/i)||[])[1] || '',\n\t\tnotes: {}\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.gun = this.props.gun.get('notes');\n\t\tthis.send = this.send.bind(this);\n\t}\n\n\tcomponentWillMount() {\n\t\tconst tmpState = {};\n\n\t\tthis.gun.map().val((note, key) => {\n\t\t\ttmpState[key] = note;\n\t\t\tthis.setState({ notes: Object.assign({}, this.state.notes, tmpState) });\n\t\t});\n\t}\n\n\tsend(e) {\n\t\te.preventDefault();\n\t\tconst who = this.state.name || 'user' + Gun.text.random(6);\n\t\tthis.setState({ name: who });\n\t\tdocument.cookie = ('alias=' + who);\n\t\tconst when = Gun.time.is();\n\t\tconst key = `${when}_${Gun.text.random(4)}`;\n\t\tthis.gun.get(key).put({\n\t\t\twho,\n\t\t\twhen,\n\t\t\twhat: this.state.newNote\n\t\t});\n\t\tthis.setState({ newNote: '' });\n\t}\n\n\thandleChange = key => e => this.setState({ [key]: e.target.value })\n\n\trender() {\n\t\tconst notes = formatNotes(this.state.notes);\n\n\t\treturn (\n\t\t\t<div class={style.home}>\n\t\t\t\t<h1>hello</h1>\n\t\t\t\t<ul>\n\t\t\t\t\t{notes.map(note =>\n\t\t\t\t\t\t<li key={note.key}><b>{note.who}:</b> {note.what}<span className=\"when\">{note.whenFmt}</span></li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t\t<form onSubmit={this.send}>\n\t\t\t\t\t<input value={this.state.name} className=\"who\" onChange={this.handleChange('name')} />\n\t\t\t\t\t<input value={this.state.newNote} className=\"what\" onChange={this.handleChange('newNote')} />\n\t\t\t\t\t<button onClick={this.send}>Send</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/home/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__MseGd\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/home/style.css\n// module id = ZAL5\n// module chunks = 1"],"sourceRoot":""}